!function(){var e={};function o(){var o=e.words.rows.length+1,a=e.words.rcount;$.ajax({url:"/mumu/template-wordbook-words?",data:{wordbookNo:e.wordbookNo,templateNo:e.templateNo,rstart:o,rcount:a,getWordbook:1},success:function(o){0==o.code&&(e.wordbook=o.data.wordbook,$("#title").text(e.wordbook.name),o.data.rows.length>0&&o.data.rows.forEach((o=>{e.words.rows.push(o);var a=$(".rowspad .row0").clone(!0);a.removeClass("row0"),a.addClass("no"+o.no),a.find(".word").text(o.word),o.speakUrl=o.usSpeech?o.usSpeech:o.ukSpeech?o.ukSpeech:o.speakUrl,o.phonetic=o.usPhonetic?o.usPhonetic:o.ukPhonetic?o.ukPhonetic:o.phonetic,o.phonetic?a.find(".phonetic").text("/"+o.phonetic+"/"):(a.find(".word").css("width","70%"),a.find(".phonetic").hide()),a.find(".translation").text(o.translation),$(".rowspad .row0").before(a),a.show(),e.words.map["no"+o.no]=o,a[0].data=o})))}})}function a(){$("#rollShowWordsPad").hide(),e._mp3.pause(),e.lettersound.pause(),clearTimeout(e.rollWordsInterval),clearTimeout(e.readRollWordTimeout),e.rollOpen=0}function r(c){if(e.rollOpen){if(e._mp3.pause(),e.lettersound.pause(),clearTimeout(e.rollWordsInterval),clearTimeout(e.readRollWordTimeout),0!=e.words.rows.length){var t=e.words.rows[c-1];if(t||o(e.wordbooks.selected.no),!(t=e.words.rows[c-1]))return e.rollInx=1,void r(e.rollInx);if(e.rollword=t,t.speakUrl=t.usSpeech?t.usSpeech:t.ukSpeech?t.ukSpeech:t.speakUrl,t.speakUrl||$.ajax({url:"/mumu/translate?from=1&to=2&q="+t.word,ajaxCache:!0,async:!1,success:function(e){0==e.code&&(t.speakUrl=e.data.speakUrl,t.usSpeech=e.data.usSpeech,t.ukSpeech=e.data.ukSpeech,t.usPhonetic=e.data.usPhonetic,t.ukPhonetic=e.data.ukPhonetic)}}),t.speakUrl=t.usSpeech?t.usSpeech:t.ukSpeech?t.ukSpeech:t.speakUrl,t.phonetic=t.usPhonetic?t.usPhonetic:t.ukPhonetic?t.ukPhonetic:t.phonetic,e.rollInx=c,localStorage.setItem(config.project+"-rollInx",e.rollInx),$("#rollShowWordsPad .word").text(t.word),$("#rollShowWordsPad .inx").text(c),$("#rollShowWordsPad .phonetic").text(t.phonetic?"/"+t.phonetic+"/":" "),$("#rollShowWordsPad .translation").text(t.translation||" "),e.auto&&e.rollIsSound){!function(o){var a=0;o.speakUrl?(e._mp3.muted=!1,e._mp3.src=o.speakUrl):(e._mp3.muted=!0,e._mp3.src="/file/mumu/lettersounds/a.mp3");e._mp3.onpause=function(){if(e._mp3.currentTime==e._mp3.duration)if(a>0)e.readRollWordTimeout=setTimeout((function(){e._mp3.play()}),100),a--;else{function c(){e.rollWordsInterval=setTimeout((function(){e._mp3.onpause=function(){e.rollWordsInterval=setTimeout((function(){r(e.rollInx+1)}),1e3)},e._mp3.src=o.translationVoice,e._mp3.play()}),100)}clearTimeout(e.readRollWordTimeout),clearTimeout(e.rollWordsInterval),o.translationVoice?c():$.ajax({url:"/mumu/get-read",data:{text:o.translation,lang:"zh"},success:function(e){o.translationVoice=e.data.voice,c()}})}},e._mp3.play()}(t)}}}else a()}window.page=e,e.wordbookNo=ttb(getUrlParam("wordbookNo")),e.templateNo=ttb(getUrlParam("templateNo")),e.wordbook=null,e.extendword=null,e.rollword=null,e.words={rcount:200,rows:[],inx:0,map:{},select:null},o(),setTimeout((function(){$("#logo").hide(),$("#index").show(),$("#play").show(),$("#title").show(),$("#goindexbtn").show()}),1e3),$("#rollShowWordsPad .word").click((function(){log.info("$('#rollShowWordsPad .word').click"),e.extendword=e.rollword.word,$("#extendSearchPad").show(),$("#extendSearchFrame").attr("src","https://cn.bing.com/images/search?ensearch=1&q="+e.extendword).show(),$("#extendSearchFrame1").attr("src",null).hide(),$("#extendSearchFrame2").attr("src",null).hide(),$("#extendSearchFrame3").attr("src",null).hide(),$("#extendSearchFrame4").attr("src",null).hide(),$("#extendSearchPad .g").css("background-color","#ffffff"),$("#extendSearchPad .g1").css("background-color","#cacaca"),$("#extendSearchPad .g2").css("background-color","#cacaca"),$("#extendSearchPad .g3").css("background-color","#cacaca"),$("#extendSearchPad .g4").css("background-color","#cacaca")})),$(".rowspad .row0").click((function(){log.info("$('.rowspad .row0').click"),$(".rowspad .row").css("background-color","unset"),$(this).css("background-color","#444"),e.words.select=this.data,e.rollInx=e.words.rows.indexOf(e.words.select)+1,e.extendword=e.words.select.word,$("#extendSearchPad").show(),$("#extendSearchFrame").attr("src","https://cn.bing.com/images/search?ensearch=1&q="+e.extendword).show(),$("#extendSearchFrame1").attr("src",null).hide(),$("#extendSearchFrame2").attr("src",null).hide(),$("#extendSearchFrame3").attr("src",null).hide(),$("#extendSearchFrame4").attr("src",null).hide(),$("#extendSearchPad .g").css("background-color","#ffffff"),$("#extendSearchPad .g1").css("background-color","#cacaca"),$("#extendSearchPad .g2").css("background-color","#cacaca"),$("#extendSearchPad .g3").css("background-color","#cacaca"),$("#extendSearchPad .g4").css("background-color","#cacaca")})),$("#extendSearchPad").click((function(e){log.info("$('#extendSearchPad').click"),this==e.target&&($("#extendSearchPad").hide(),$("#extendSearchFrame").attr("src",null).hide(),$("#extendSearchFrame1").attr("src",null).hide(),$("#extendSearchFrame2").attr("src",null).hide(),$("#extendSearchFrame3").attr("src",null).hide(),$("#extendSearchFrame4").attr("src",null).hide(),$("#extendSearchPad .g").css("background-color","unset"),$("#extendSearchPad .g1").css("background-color","unset"),$("#extendSearchPad .g2").css("background-color","unset"),$("#extendSearchPad .g3").css("background-color","unset"),$("#extendSearchPad .g4").css("background-color","unset"))})),$("#extendSearchPad .g").click((function(e){log.info("$('#extendSearchPad .g').click"),$("#extendSearchFrame").show(),$("#extendSearchFrame1").hide(),$("#extendSearchFrame2").hide(),$("#extendSearchFrame3").hide(),$("#extendSearchFrame4").hide(),$("#extendSearchPad .g").css("background-color","#ffffff"),$("#extendSearchPad .g1").css("background-color","#cacaca"),$("#extendSearchPad .g2").css("background-color","#cacaca"),$("#extendSearchPad .g3").css("background-color","#cacaca"),$("#extendSearchPad .g4").css("background-color","#cacaca")})),$("#extendSearchPad .g1").click((function(o){log.info("$('#extendSearchPad .g1').click"),$("#extendSearchFrame").hide(),$("#extendSearchFrame1").show(),$("#extendSearchFrame2").hide(),$("#extendSearchFrame3").hide(),$("#extendSearchFrame4").hide(),$("#extendSearchPad .g").css("background-color","#cacaca"),$("#extendSearchPad .g1").css("background-color","#ffffff"),$("#extendSearchPad .g2").css("background-color","#cacaca"),$("#extendSearchPad .g3").css("background-color","#cacaca"),$("#extendSearchPad .g4").css("background-color","#cacaca"),$("#extendSearchFrame1").attr("src")||$("#extendSearchFrame1").attr("src","https://m.baidu.com/s?word=英文"+e.extendword)})),$("#extendSearchPad .g2").click((function(o){log.info("$('#extendSearchPad .g2').click"),$("#extendSearchFrame").hide(),$("#extendSearchFrame1").hide(),$("#extendSearchFrame2").show(),$("#extendSearchFrame3").hide(),$("#extendSearchFrame4").hide(),$("#extendSearchPad .g").css("background-color","#cacaca"),$("#extendSearchPad .g1").css("background-color","#cacaca"),$("#extendSearchPad .g2").css("background-color","#ffffff"),$("#extendSearchPad .g3").css("background-color","#cacaca"),$("#extendSearchPad .g4").css("background-color","#cacaca"),$("#extendSearchFrame2").attr("src")||$("#extendSearchFrame2").attr("src","https://m.aliexpress.com/wholesale/"+e.extendword+".html?osf=direct")})),$("#extendSearchPad .g3").click((function(o){log.info("$('#extendSearchPad .g3').click"),$("#extendSearchFrame").hide(),$("#extendSearchFrame1").hide(),$("#extendSearchFrame2").hide(),$("#extendSearchFrame3").show(),$("#extendSearchFrame4").hide(),$("#extendSearchPad .g").css("background-color","#cacaca"),$("#extendSearchPad .g1").css("background-color","#cacaca"),$("#extendSearchPad .g2").css("background-color","#cacaca"),$("#extendSearchPad .g3").css("background-color","#ffffff"),$("#extendSearchPad .g4").css("background-color","#cacaca"),$("#extendSearchFrame3").attr("src")||$("#extendSearchFrame3").attr("src","https://www.merriam-webster.com/dictionary/"+e.extendword)})),$("#extendSearchPad .g4").click((function(o){log.info("$('#extendSearchPad .g4').click"),$("#extendSearchFrame").hide(),$("#extendSearchFrame1").hide(),$("#extendSearchFrame2").hide(),$("#extendSearchFrame3").hide(),$("#extendSearchFrame4").show(),$("#extendSearchPad .g").css("background-color","#cacaca"),$("#extendSearchPad .g1").css("background-color","#cacaca"),$("#extendSearchPad .g2").css("background-color","#cacaca"),$("#extendSearchPad .g3").css("background-color","#cacaca"),$("#extendSearchPad .g4").css("background-color","#ffffff"),$("#extendSearchFrame4").attr("src")||$("#extendSearchFrame4").attr("src","https://m.youdao.com/dict?q="+e.extendword)})),$(".coverTargetTextBtn").click((function(){log.info("$('.coverTargetTextBtn').click"),"hidden"==$(".word").css("visibility")?$(".word").css("visibility","visible"):$(".word").css("visibility","hidden")})),$(".coverPhoneticTextBtn").click((function(){log.info("$('.coverPhoneticTextBtn').click"),"hidden"==$(".phonetic").css("visibility")?$(".phonetic").css("visibility","visible"):$(".phonetic").css("visibility","hidden")})),$(".coverMainTextBtn").click((function(){log.info("$('.coverMainTextBtn').click"),"hidden"==$(".translation").css("visibility")?$(".translation").css("visibility","visible"):$(".translation").css("visibility","hidden")})),$("#goindexbtn").click((function(){log.info("$('#goindexbtn').click"),location.replace("./")})),$("#play").click((function(){log.info("$('#play').click"),e.rollOpen=1,$("#rollShowWordsPad").show(),$("#rollShowWordsPad .stop").hide(),$("#rollShowWordsPad .start").show(),e.rollIsSound=0,e.auto=0,e.rollInx=e.rollInx?e.rollInx:1,r(e.rollInx)})),$("#rollShowWordsPad").click((function(e){log.info("$('#rollShowWordsPad').click"),this==e.target&&a()})),$("#rollShowWordsPad .prev").click((function(o){log.info("$('#rollShowWordsPad .prev').click"),r(e.rollInx-1)})),$("#rollShowWordsPad .next").click((function(o){log.info("$('#rollShowWordsPad .next').click"),r(e.rollInx+1)})),$("#rollShowWordsPad .restart").click((function(e){log.info("$('#rollShowWordsPad .restart').click"),r(1)})),$("#rollShowWordsPad .stop").click((function(o){log.info("$('#rollShowWordsPad .stop').click"),e._mp3.pause(),e.lettersound.pause(),clearTimeout(e.rollWordsInterval),clearTimeout(e.readRollWordTimeout),$("#rollShowWordsPad .stop").hide(),$("#rollShowWordsPad .start").show(),e.rollIsSound=0,e.auto=0})),$("#rollShowWordsPad .start").click((function(o){var a;log.info("$('#rollShowWordsPad .start').click"),e.rollIsSound=1,e.auto=1,a=e.rollInx,$("#rollShowWordsPad .stop").show(),$("#rollShowWordsPad .start").hide(),e.rollIsSound=1,e.auto=1,r(a=a||1)})),$("#startRollBtn").click((function(){log.info("$('#startRollBtn').click"),e.rollOpen=1,$("#rollShowWordsPad").show(),$("#rollShowWordsPad .stop").hide(),$("#rollShowWordsPad .start").show(),e.rollIsSound=0,e.auto=0,e.rollInx=e.rollInx?e.rollInx:1,r(e.rollInx)})),$("#rollShowWordsPad .word").click((function(){log.info("$('#rollShowWordsPad .word').click");var o=e.words.rows[e.rollInx-1];translatee(o.word),loadRelatedWords(o.word),a()})),e._mp3=document.createElement("video"),e.lettersound=document.createElement("video"),is_weixn()&&($.post("/mumu/wxjsapiticket",(e=>{$.post("/mumu/wxsign",{ticket:e.data.ticket,url:location.href},(e=>{wx.config({debug:!1,appId:e.data.appid,timestamp:e.data.timestamp,nonceStr:e.data.nonceStr,signature:e.data.signature,jsApiList:["updateAppMessageShareData","updateTimelineShareData"]})}))})),e.shareLink=location.origin+"/mumu/wordbook.html?wordbookNo="+e.wordbookNo+"&templateNo="+e.templateNo,wx.ready((function(){wx.updateAppMessageShareData({title:e.wordbook.name+"的英文",desc:"单词本",link:e.shareLink,imgUrl:location.origin+"/mumu/favicon.ico",success:function(){}}),wx.updateTimelineShareData({title:e.wordbook.name+"的英文\n单词本",link:e.shareLink,imgUrl:location.origin+"/mumu/favicon.ico",success:function(){}})}))),window.onbeforeunload=function(){log.flush()}}();